$def with (form, text)
<!doctype html>
<html>
<head>
    <title> MongoDB Tree </title>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css" />
    <script type="text/javascript" src="/static/js/jquery.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="static/js/rickshaw.js"></script>
</head>
<body>
    <br>
    <div id="graph">
    <script>
    var netTopTopic = "networkTopology";
    var cpu_util_offset = "0";
    ajaxreq = 0;
    off = 0;

    // recurringly poll for data and update D3.JS elements.
    var update = function () {
        ajaxMongoDB(netTopTopic,cpu_util_offset,refresh_CPU_util);
        //setTimeout(update, 10000);
    }

    // Poll the python script on the server for current values
    var ajaxMongoDB = function(topic, currentoffset, callback) {
        console.log("Performing Ajax request no " + ajaxreq + ".")
        console.log("Data is currently: " + currentoffset)
        ajaxreq ++;
        jQuery.ajax({
            type: "POST",
            data: {textfield : topic, off: currentoffset},
            success: function(data) {
                console.log("New data is: " + data);
                callback(data);
            },
        });
    }

    // Refresh the Graph of CPU Util stats
    var refresh_CPU_util = function(myOffset, dat) {
        cpu_util_offset = myOffset;
        jQuery('#values').html('Offset: ' + cpu_util_offset + '<br /> Value: ' +  dat);
    }

    //Run when page is opened
    update();
    setTimeout(update, 1000);
    </script>
</div>
<br /><br />
<span id="topN"></span>
<br /><br />
<span id="values">$text</span>
<br />
</body>
</html>